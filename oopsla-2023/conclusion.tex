
%% -----------------------------------------------------------------------------

Sound migratory typing comes with several advantages~\cite{lgfd-icfp-2021,
lgfd-icfp-2023} but also poses a serious performance-debugging challenge to
programmers who wish to use it. To overcome performance-debugging problems,
programmers tend to use profiling tools. Using such tools, however, also assumes
that programmers know how to best interpret their feedback. This paper reports
on the results of using the novel rational-programmer evaluation method for this
problem.

At the object level, the results essentially deliver several insights. First,
the boundary profiler works well if used with any ``optimistic''
interpretation strategy. That is, programmers should eliminate the hottest
boundary, as identified by the boundary profiler, by making both modules
use deeply checked types. Second, if a program comes with a low overhead for all
mixed-typed variants, the statistical profiler works reasonably well;
otherwise the statistics profiler is unhelpful for performance-debugging
problems in this context. Third, while profiling tools help with debugging
problematic performance scenarios, the data collection also clarifies that for
certain kinds of programs, the migration lattice contains a huge ``black hole''
of performance scenario, rendering any of the considered strategies
useless. In other words, profiling tools used with the proposed strategies do
not suffice. Finally, the results weaken \citet{g-deep-shallow}'s report that
adding shallow type enforcement is helpful; except for rare scenarios, none of
the results here confirm his report.

At the meta level, the experiment once again confirms the value of the
rational-programmer method. Massive simulations of satisficing rational
programmers deliver indicative results that clearly contradict anecdotal reports
of human programmers. As mentioned, a rational programmer is {\em not\/} an
idealized human developer. It remains an open question whether and how the
results apply to actual performance-debugging scenarios when human beings are
involved.

Finally, the rational-programmer experiment also suggests several ideas for
future research. First, the experiment should be reproduced for alternative
mixed-typed languages. Nothing else will confirm the value of the optimistic
interpretations of feedback from the boundary profiler. Second, the
experiment clearly demonstrates that existing profiling tools are not enough to
overcome the performance challenges of sound migratory typing. Unless researchers
can construct a performant compiler for a production language with sound migratory 
typing, the community must improve the available profiling tools to navigate the
migration lattice or invent new ones.



% future work:

% - shallow fsp?

% - how this all changes when the compiler knows more optimizations 

% - rational programmer: experiment should be repeated in other settings


% Shallow / transient gets no benefit from boundary profiling,
% some benefit from statistical.
% How about a shallow FSP?


%% MF what does this mean? 
%% Would a simpler approach work just as well [CITE vmil]?


